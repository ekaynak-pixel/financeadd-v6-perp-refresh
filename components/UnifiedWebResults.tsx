'use client';import {useEffect,useState} from 'react';function slugify(s:string){return s.toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,'').slice(0,120)}export default function UnifiedWebResults({term}:{term:string}){const[items,setItems]=useState<any[]>([]);useEffect(()=>{fetch(`/api/search?q=${encodeURIComponent(term)}`,{cache:'no-store'}).then(r=>r.json()).then(d=>setItems(Array.isArray(d)?d:[])).catch(()=>setItems([]))},[term]);if(!items.length) return null;return(<div className="grid gap-3">{items.map(x=>{const slug=slugify(x.title||x.url||'result');const internal=`/r/${slug}?url=${encodeURIComponent(x.url)}&t=${encodeURIComponent(x.title||'')}`;return(<a key={x.url} className="block" href={internal}><div className="font-medium">{x.title}</div><div className="small">{x.source}</div><div className="small">{x.snippet}</div></a>);})}</div>)}
